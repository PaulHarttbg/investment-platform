<%- include('partials/dashboard-header', { title: 'Dashboard' }) %>

<div class="container">
    <div class="dashboard-welcome">
        <h1>Welcome back, <span id="welcomeName">User</span>!</h1>
        <p>Here's your investment overview</p>
    </div>

    <div class="dashboard-grid">
        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-title">Account Balance</div>
                <div class="card-icon" style="background: linear-gradient(135deg, #1a2a6c, #b21f1f);">
                    <i class="fas fa-wallet"></i>
                </div>
            </div>
            <div class="card-value" id="accountBalance">$0.00</div>
            <div class="card-change positive">
                <i class="fas fa-arrow-up"></i>
                Available for investment
            </div>
        </div>

        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-title">Total Invested</div>
                <div class="card-icon" style="background: linear-gradient(135deg, #1a2a6c, #667eea);">
                    <i class="fas fa-chart-line"></i>
                </div>
            </div>
            <div class="card-value" id="totalInvested">$0.00</div>
            <div class="card-change">
                <i class="fas fa-info-circle"></i>
                Active investments
            </div>
        </div>

        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-title">Total Profit</div>
                <div class="card-icon" style="background: linear-gradient(135deg, #b21f1f, #fdbb2d);">
                    <i class="fas fa-trophy"></i>
                </div>
            </div>
            <div class="card-value" id="totalProfit">$0.00</div>
            <div class="card-change positive">
                <i class="fas fa-arrow-up"></i>
                <span id="profitPercentage">0%</span> return
            </div>
        </div>

        <div class="dashboard-card">
            <div class="card-header">
                <div class="card-title">Active Packages</div>
                <div class="card-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                    <i class="fas fa-box"></i>
                </div>
            </div>
            <div class="card-value" id="activePackages">0</div>
            <div class="card-change">
                <i class="fas fa-clock"></i>
                Investment plans
            </div>
        </div>
    </div>

    <div class="dashboard-card" style="margin-top: 40px;">
        <div class="card-header">
            <h3 class="card-title">Live Market Prices</h3>
            <div class="card-icon" style="background: linear-gradient(135deg, #fdbb2d, #b21f1f);">
                <i class="fas fa-coins"></i>
            </div>
        </div>
        <div id="crypto-prices-ticker" style="display: flex; justify-content: space-around; padding: 20px 0;">
            <div class="crypto-price-item" style="text-align: center;">
                <h4 style="font-size: 16px; color: #666; margin-bottom: 5px;"><i class="fab fa-bitcoin"></i> BTC</h4>
                <span id="btc-price-display" style="font-size: 18px; font-weight: 600; color: #1a2a6c;">Loading...</span>
            </div>
            <div class="crypto-price-item" style="text-align: center;">
                <h4 style="font-size: 16px; color: #666; margin-bottom: 5px;"><i class="fab fa-ethereum"></i> ETH</h4>
                <span id="eth-price-display" style="font-size: 18px; font-weight: 600; color: #1a2a6c;">Loading...</span>
            </div>
            <div class="crypto-price-item" style="text-align: center;">
                <h4 style="font-size: 16px; color: #666; margin-bottom: 5px;"><i class="fab fa-litecoin-sign"></i> LTC</h4>
                <span id="ltc-price-display" style="font-size: 18px; font-weight: 600; color: #1a2a6c;">Loading...</span>
            </div>
        </div>
    </div>

    <div class="dashboard-sections">
        <div class="section-tabs">
            <button class="tab-btn active" onclick="showTab('investments', event)">My Investments</button>
            <button class="tab-btn" onclick="showTab('transactions', event)">Transactions</button>
            <button class="tab-btn" onclick="showTab('packages', event)">Investment Packages</button>
        </div>

        <div class="tab-content active" id="investments">
            <div class="section-header">
                <h2>Active Investments</h2>
                <a href="/packages" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    New Investment
                </a>
            </div>
            <div class="investments-grid" id="investmentsGrid">
                <div class="empty-state">
                    <i class="fas fa-chart-line"></i>
                    <h3>No Active Investments</h3>
                    <p>Start your investment journey today</p>
                    <a href="/packages" class="btn btn-primary">Choose Package</a>
                </div>
            </div>
        </div>

        <div class="tab-content" id="transactions">
            <div class="section-header">
                <h2>Recent Transactions</h2>
                <a href="/deposit" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Deposit Funds
                </a>
            </div>
            <div class="transactions-list" id="transactionsList">
                <div class="empty-state">
                    <i class="fas fa-receipt"></i>
                    <h3>No Transactions Yet</h3>
                    <p>Your transaction history will appear here</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="packages">
            <div class="section-header">
                <h2>Available Investment Packages</h2>
            </div>
            <div class="packages-grid" id="packagesGrid">
                <!-- Packages will be loaded by dashboard.js -->
            </div>
        </div>
    </div>
</div>

<!-- Investment Modal -->
<div class="modal" id="investmentModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Invest in <span id="modalPackageName">Package</span></h3>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="investment-details">
                <div class="detail-item">
                    <span>Package:</span>
                    <span id="modalPackageDetails"></span>
                </div>
                <div class="detail-item">
                    <span>Annual Return:</span>
                    <span id="modalReturnRate"></span>
                </div>
                <div class="detail-item">
                    <span>Available Balance:</span>
                    <span id="modalAvailableBalance">$0.00</span>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Investment Amount</label>
                <div class="input-group">
                    <i class="fas fa-dollar-sign input-icon"></i>
                    <input type="number" class="form-input" id="investmentAmount" placeholder="Enter amount" min="100" step="10">
                </div>
                <small class="form-help">Minimum investment: $100</small>
            </div>
            <div class="projected-returns">
                <h4>Projected Returns</h4>
                <div class="return-breakdown">
                    <div class="return-item">
                        <span>Monthly Return:</span>
                        <span id="monthlyReturn">$0.00</span>
                    </div>
                    <div class="return-item">
                        <span>Total Return:</span>
                        <span id="totalReturn">$0.00</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-primary" onclick="confirmInvestment()">Confirm Investment</button>
        </div>
    </div>
</div>

<%- include('partials/dashboard-footer') %>